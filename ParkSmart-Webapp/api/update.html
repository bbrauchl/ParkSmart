<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="apis.css">
</head>
<body>
    <h1>ParkSmart Update API</h1>
    <p>It looks like you have found the ParkSmart Update API.</p>
    <table>
        <tr>
            <th colspan="4">Update API Usage:</th>
        </tr>
        <tr>
            <th id="url" colspan="4">Please submit parking information updates as a html post request to</th>
        </tr>
        <tr><th colspan="4"></th></tr>
        <tr>
            <th colspan="4">Calling Parameters</th>
        </tr>
        <tr>
            <th>Key</th>
            <th>Required?</th>
            <th>Type</th>
            <th>Content</th>
        </tr>
        <tr>
            <td>'payload'</td>
            <td>Yes</td>
            <td>JSON-encoded Array</td>
            <td>JSON-encoded Array of <u><b>ParkSmart ParkingSpaceUpdate</b></u> Objects</td>
        </tr>
        <tr>
            <th colspan="4"></th>
        </tr>
        <tr>
            <th colspan="4">Return Parameters</th>
        </tr>
        <tr>
            <th>Format</th>
            <th colspan="3">Contents</th>
        </tr>
        <tr>
            <td>Plaintext String</td>
            <td colspan="3">Status Text containing either "Success!" or an error message</td>
        </tr>
        <tr>
            <th colspan="4"></th>
        </tr>
        <tr>
            <th colspan="4">ParkSmart ParkingSpaceUpdate object</th>
        </tr>
        <tr>
            <th>Key</th>
            <th>Required?</th>
            <th>Type</th>
            <th>Content</th>
        </tr>
        <tr>
            <td>'Lot'</td>
            <td>Yes</td>
            <td>String</td>
            <td>Parking Lot Table name in ParkSmart MySQL database. example: 'Lot_D'</td>
        </tr>
        <tr>
            <td>'Space'</td>
            <td>Yes</td>
            <td>Integer</td>
            <td>Parking Space index to update</td>
        </tr>
        <tr>
            <td>'IsOccupied'</td>
            <td>Yes</td>
            <td>Boolean</td>
            <td>Occupency state of the parking spot. A value of '1' means the spot is occupied whereas a value of '0' implys the spot is vacent</td>
        </tr>
        <tr>
            <td>'Confidence'</td>
            <td>Yes</td>
            <td>Float</td>
            <td>Confidence of the inference on the spot. The value be between 0 and 1</td>
        </tr>
        <tr>
            <td>'Type'</td>
            <td>Yes</td>
            <td>Enum</td>
            <td>Specifies the type of parking space. Acceptable Values: 'student', 'faculty', 'visitor', 'handicap', 'electric-vehicle'</td>
        </tr>
        <tr>
            <td>'Extra'</td>
            <td>No</td>
            <td>String</td>
            <td>Catch-all for any extra data that needs to be attached to a specific space in the database</td>
        </tr>
        <tr>
            <th colspan="4"></th>
        </tr>
    </table>

    <div>
        <h3>Example (Python)</h3>
        <div class="py">
            <span>
                <span class="op">import </span><!--
                --><span class="var">requests</span>
            </span>
            <br>
            <span>
                <span class="op">import </span><!--
                --><span class="var">json</span>
            </span>
            <br>
            <br>
            <span>
                <span class="var">url </span><!--
                --><span class="op">= </span><!--
                --><span class="str" id="demourl"></span>
            </span>
            <br>
            <span class="var">update_item </span><!--
            --><span class="op">= {</span>
            </span>
            <br>
            <span>
                <span class="tab">&#9;</span><!--
                --><span class="str">'Lot'</span><!--
                --><span class="op">: </span><!--
                --><span class="str">'Lot_D'</span><!--
                --><span class="op">,</span>
            </span>
            <br>
            <span>
                <span class="tab">&#9;</span><!--
                --><span class="str">'Space'</span><!--
                --><span class="op">: </span><!--
                --><span class="num">12</span><!--
                --><span class="op">,</span>
            </span>
            <br>
            <span>
                <span class="tab">&#9;</span><!--
                --><span class="str">'IsOccupied'</span><!--
                --><span class="op">: </span><!--
                --><span class="logic">True</span><!--
                --><span class="op">,</span>
            </span>
            <br>
            <span>
                <span class="tab">&#9;</span><!--
                --><span class="str">'Confidence'</span><!--
                --><span class="op">: </span><!--
                --><span class="num">0.75</span><!--
                --><span class="op">,</span>
            </span>
            <br>
            <span>
                <span class="tab">&#9;</span><!--
                --><span class="str">'Type'</span><!--
                --><span class="op">: </span><!--
                --><span class="str">'student'</span><!--
                --><span class="op">,</span>
            </span>
            <br>
            <span>
                <span class="tab">&#9;</span><!--
                --><span class="str">'Extra'</span><!--
                --><span class="op">: </span><!--
                --><span class="str">'Parked Illegally'</span><!--
                --><span class="op">,</span>
            </span>
            <br>
            <span>
                <span class="tab">&#9;</span><!--
                --><span class="op">}</span>
            </span>
            <br>
            <br>
            <span>
                <span class="func">print</span><!--
                --><span class="op">(</span><!--
                --><span class="var">requests</span><!--
                --><span class="op">.</span><!--
                --><span class="func">post</span><!--
                --><span class="op">(</span><!--
                --><span class="var">url</span><!--
                --><span class="op">, </span><!--
                --><span class="var">data</span><!--
                --><span class="op">={</span><!--
                --><span class="str">'payload'</span><!--
                --><span class="op">:</span><!--
                --><span class="var">json</span><!--
                --><span class="op">.</span><!--
                --><span class="func">dumps</span><!--
                --><span class="op">(</span><!--
                --><span class="var">update_item</span><!--
                --><span class="op">)}).</span><!--
                --><span class="var">text</span><!--
                --><span class="op">)</span>
            </span>
        </div>
    </div>
</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
    const url = window.location.href.replace(".html", ".php");
    document.getElementById("url").innerHTML += "<br>API endpoint: <a href=" + url + ">" + url + "</a>";
    document.getElementById("demourl").innerHTML = "\"" + url + "\"";
</script>
