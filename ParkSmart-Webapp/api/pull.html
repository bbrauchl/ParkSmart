<!DOCTYPE html>
<html>
    <head>
        <style>
            table {
              font-family: arial, sans-serif;
              border-collapse: collapse;
              width: 500;
            }
            
            td, th {
              border: 1px solid black;
              text-align: left;
              padding: 8px;
            }
            
            tr:nth-child(even) {
              background-color: #dddddd;
            }
        </style>
    </head>
    <body>
        <h1>ParkSmart Pull API</h1>
        <p>It looks like you found the ParkSmart Update API.</p>
        <table>
            <tr>
                <th colspan="4">Pull API Usage:</th>
            </tr>
            <tr>
                <th id="url_1" colspan="4">Used to fetch the current state of the parking database.
                    <br>The endpoint is to be accessed with HTML "POST" method
                    <br>endpoint: 
                </th>
            </tr>
            <tr>
                <th colspan="4"></th>
            </tr>
            <tr>
                <th colspan="4">Calling Parameters</th>
            </tr>
            <tr>
                <th>Key</th>
                <th>Required?</th>
                <th>Type</th>
                <th>Content</th>
            </tr>
            <tr>
                <td>'Lot'</td>
                <td>No</td>
                <td>JSON-encoded Array</td>
                <td>JSON-encoded Array of strings representing the names of the parking lots to be queried. If the
                    parameter is not provided, then all the parking lots will be returned.
                </td>
            </tr>
            <tr>
                <th colspan="4"></th>
            </tr>
            <tr>
                <th colspan="4">Return Parameters</th>
            </tr>
            <tr>
                <th>Format</th>
                <th colspan="3">Contents</th>
            </tr>
            <tr>
                <td>JSON-encoded Object</td>
                <td colspan="3">Object with properties corrisponding to every parking lot returned in the pull.
                    <br>Each Parking lot property contains an array of ParkSmart ParkingSpace objects, 
                    <br>with one object represinging each parking space in the lot.
                </td>
            </tr>
            <tr>
                <th colspan="4"></th>
            </tr>
            <tr>
                <th colspan="4">ParkSmart ParkingSpace object</th>
            </tr>
            <tr>
                <th>Key</th>
                <th>Type</th>
                <th colspan="2">Content</th>
            </tr>
            <tr>
                <td>'Space'</td>
                <td>Integer</td>
                <td colspan="2">Space index that the object reffers to.</td>
            </tr>
            <tr>
                <td>'IsOccupied'</td>
                <td>Boolean</td>
                <td colspan="2">"1" or "0" representing if the space is occupied ("1") or is vacent ("0")</td>
            </tr>
            <tr>
                <td>'Confidence'</td>
                <td>Float</td>
                <td colspan="2">Floating point representation of the inference confidence in the reported vaccency
                    <br>state. Consists of a number f where f is between 0 and 1.
                </td>
            </tr>
            <tr>
                <td>'Type'</td>
                <td>ENUM</td>
                <td colspan="2">Represents which kind of parking space the object represents. Possible options:
                    <br>['student', 'faculty', 'visitor', 'handicap', 'electric-vehicle'] 
                </td>
            </tr>
            <tr>
                <td>'Extra'</td>
                <td>String</td>
                <td colspan="2">Generic Catch-all for any additional parking information. In this revision
                    <br>of the API, it is unused.
                </td>
            </tr>
            <tr>
                <td>'start_timestamp'</td>
                <td>Time String</td>
                <td colspan="2">Automatically generated time of when a row was inserted into the database.
                    <br>This parameter can be used to determin how recent the parking lot data is and if
                    <br>that data is valid.
                </td>
            </tr>
            <tr>
                <td>'end_timestamp'</td>
                <td>Time String</td>
                <td colspan="2">Automatically generated time when a row is retired/update. In databases where
                    <br>timing is enabled this allows for data to be kept for historic reasons but in this
                    <br>deployment this feature is not enabled, making this colum fairly useless.
                </td>
            </tr>
        </table>
        <div>
            <h3>Example (Python)</h3>
            <div class="py">
                <span>

                    <span class="pyimport">import </span>
                    <span class="pynormal">requests</span>
                </span>
                <br>
                <span>
                    <span class="pyimport">import </span>
                    <span class="pynormal">json</span>
                </span>
                <br>
                <br>
                <span>
                    <span class="pyvar">endpoint </span>
                    <span class="pyoperator">= </span>
                    <span id="url_2" class="pystring"></span>
                </span>
                <br>
                <span>
                    <span class="pyvar">params </span>
                    <span class="pyoperator">= </span>
                    <span class="pynormal">{</span>
                    <span class="pystring">'Lot'</span>
                    <span class="pynormal">:</span>
                    <span class="pystring">'Lot_D'</span>
                    <span class="pynormal">}</span>
                </span>
                <br>
                <br>
                <span>
                    <span class="pyvar">r </span>
                    <span class="pyoperator">= </span>
                    <span class="pynormal">requests.post(</span>
                    <span class="pyvar">endpoint</span>
                    <span class="pynormal">, data</span>
                    <span class="pyoperator">=</span>
                    <span class="pyvar">params</span>
                    <span class="pynormal">)</span>
                </span>
                <br>
                <span>
                    <span class="pyprint">print</span>
                    <span class="pynormal">(</span>
                    <span class="pyvar">r</span>
                    <span class="pynormal">.json())</span>
                </span>
            </div>
        </div>
    </body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
    const url = window.location.href.replace(".html", ".php");
    $("#url_1").append("<a href=\"" + url + "\" >" + url + "</a>");
    $("#url_2").append("\"" + url + "\"");
</script>